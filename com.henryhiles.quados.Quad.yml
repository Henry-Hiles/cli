id: com.henryhiles.quados.Quad
sdk: org.freedesktop.Sdk
sdk-extensions:
    - org.freedesktop.Sdk.Extension.node20
runtime: org.freedesktop.Platform
runtime-version: "23.08"
finish-args:
    - --talk-name=org.freedesktop.Flatpak
    - --filesystem=~/.config/quados:w

command: quad
modules:
    - name: quad
      sources:
          - type: file
            url: https://github.com/Quad-Linux/cli/releases/download/v0.1.0/out.js
            sha256: d1629b18fdd8e80971697d523577fa942f8c10e8122a50bd0a8a67d531472649
            dest-filename: out.js
      buildsystem: simple
      build-commands:
          - /usr/lib/sdk/node20/install.sh
          - cat out.js | sed '1i \#!/app/node/bin/node' > quad
          - install -D quad /app/bin/quad
